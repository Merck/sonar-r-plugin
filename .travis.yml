language: java
jdk:
- openjdk8
cache:
  directories:
  - "$HOME/.m2/repository"
  - "$HOME/.sonar/cache"
addons:
  sonarcloud:
    organization: merck
    token:
      secure: QkyDnuSSgB+iyLRK6u+EaxVLiAmhRLhqio3i/V7x60I0WFicPZvMd3kAnfneOlh8mapFN9Ocl3tZ3k+4EEODXRKjDt1Qf1VYe8UlinFTvBnZhgtfHNQXkzdMinruwW7AuMXhpc+Nl6Ir/zN87EMWGjMrJtXIDAmPnHcYzZYIAaQEz9aD15629T7fKDYkWATRGsCSkd7uxbBKrsypM20PIrI6kOQ8xI3q82gfwwoeSdh7Cad408gXoHkuntgs87kZocKchlY8m69IYTXaFp/aK4OBOq0F99fwaV0cZNq16uzGQ2tC2FNOM622qnKxZVkSnagj60eRxLCY98Uh0o1UHlTeW+3H6cwjuwH1mLmQc4g08q7Y5QUb2ezvvoqPiDu2PgadSCQ4dOvA7R4XBK9qYGJ4Be1+816pyMJmBfhASIXXUhQo1w1oWyHRmDc5VwNOSUjEZ+JY4W72ucwNILCs2/Idx1q7dR09YBCYfgX9L1U8uyzdweoycEs1JSCTmvRKw0Vz9Y/w4miB0K7nW6ghuiy9XxRwcrK1/8vv8KpMeZt1PqnrYYlpTIVos2WYv3743jonjT7YskHzNenfT8kL7ozQtnRWIOBsuE4y23Prj3vtRQeblYipTrQRIWaQv03tn76wvBjdszYQ06ZAdGOJbiHxNyHyrFhJBa37QdEBmYY=
script:
- if [ "$TRAVIS_PULL_REQUEST" = "false" ]; then ./mvnw clean org.jacoco:jacoco-maven-plugin:prepare-agent
  package sonar:sonar; fi
before_deploy:
- "./mvnw help:evaluate -N -Dexpression=project.version|grep -v '\\['"
- export project_version=$(./mvnw help:evaluate -N -Dexpression=project.version|grep
  -v '\[')
deploy:
  provider: releases
  name: "$project_version"
  api_key:
    secure: onfsrL37o8RTd40kgsc6vciz4Ong9kIkZz9d2Y8AWKDAOf1qj/lZ8xslbKXuoGzuOYc3Wy7pCWZ7JymJNIWyWLMz6xjVEFH2q0VUn0ToCApUoORdYe2+y7ZrmXPJgRUmciDYskeprJySElthOzt1/I3lJ9DopTxW5B/DbxEsLnRHtasmilmdWT5c+X7IKba4X87Q+nC7FJcLn8H6q+YYYi5u9HNqAfNYGOB2Hj3eYaCze/Dge6HJDOmjzpPrPE9Cp1BAl+VVAPRp7ctaMIu1ImEjd8CC6L49CLrxTGl/7Vi49bg9ukdp67Uw1MbyOoxHNLdowmhXalZCtj2vJ352+7Cc3206/1Ssi0I3Ok09EV/wGLDDgxvagg3EvFko10oXHchyxurFS1W5cTQ5eM+/YPi22A/1IZwfIKLOV4A9gowFMaf9gZmd4Kfxh1/+36SmbdR2lB2tCJ3681wI/tli0YvFmLFTN8f+8rpWonu/e5DPfTkgKUXjqY2bZg80h9LvmXb9wrDZZip6WDQK3WDuTvCjl2KVhD71eic/ze+bzbIfdwuhY4T1N0u0XNgmfXSAJIaMSJsPiLE5o3A2GPY1Pi9ljvkbHL0NPOWBNlaBuuhQIROogBT2hRdo1S72XU60/FRf8RXLrkuMMuVe+cXwOqi3CSJRh0uUMtIPVyzjQmY=
  skip_cleanup: true
  file:
  - target/sonar-r-plugin-$project_version.jar
  on:
    tags: true
