language: java
jdk:
- openjdk8
cache:
  directories:
  - "$HOME/.m2/repository"
  - "$HOME/.sonar/cache"
addons:
  sonarcloud:
    organization: merck
    token:
      secure: "psLD7rBrt8SB7dC/F0H+yT/qDo1uNM5Nr3kG18G2SsqM7RZyl57/MWIOxEw9q/95LbJPAPfHdLxtm5808Ws7ePezlODxEDLvqCDH8WLiBdJd0inUCgrEKUOu2gcyOeX+yWN5I+gXdaZ98OAyB5aolYCROF1OAbTjhQq+VAOEeAaSABvZjVcztUUpJDvNxhIKGW36W9I/1a0GZV3XK0QtABgAzeB8W4Gl5TKumW7MEoItiyuQnvNW6PpDSMUCEoknAgU5aC9M6fHOxWLr2n4V1qij9oqYpHLQf3+BVibdqU04JShF6HhG8O8TVNvF3WENrKqK2KBnLr4VJHhGWElRRNkgz40DGC5NcW0IVP56/AxbmT4Y/2jAhT9FfBKD7/2wZyzYxQ2TGZOCqGxWeLqw3zjmWkUSWh1yp3CN/8bgxbDh7nQNI7OK3nv+gYxY4CJX1XklOBkkfhrc760gba9Of/v3P4WoBDevjc4SJwAkMnho04zS7PkyRtcbYQvUuLMxjCrO5CBVWjUQqV0ZqQrrPWsh7siAB5dmZEJhRXbPkpuz4CJEi/nwwh/EELjM3zarWswXiEobnL51irsUrTsjQ1rSf5Yh/P7ggzkyxO0PSymXEvQyCuRqtf2+1Lqk3GIxGGAoTZkRFhbibwteDo5hcZLmt0otLlV3+tks76IHs3A="
script:
- if [ "$TRAVIS_PULL_REQUEST" = "false" ]; then ./mvnw clean org.jacoco:jacoco-maven-plugin:prepare-agent
  package sonar:sonar; fi
before_deploy:
- "./mvnw help:evaluate -N -Dexpression=project.version|grep -v '\\['"
- export project_version=$(./mvnw help:evaluate -N -Dexpression=project.version|grep
  -v '\[')
deploy:
  provider: releases
  name: "$project_version"
  api_key:
    secure: onfsrL37o8RTd40kgsc6vciz4Ong9kIkZz9d2Y8AWKDAOf1qj/lZ8xslbKXuoGzuOYc3Wy7pCWZ7JymJNIWyWLMz6xjVEFH2q0VUn0ToCApUoORdYe2+y7ZrmXPJgRUmciDYskeprJySElthOzt1/I3lJ9DopTxW5B/DbxEsLnRHtasmilmdWT5c+X7IKba4X87Q+nC7FJcLn8H6q+YYYi5u9HNqAfNYGOB2Hj3eYaCze/Dge6HJDOmjzpPrPE9Cp1BAl+VVAPRp7ctaMIu1ImEjd8CC6L49CLrxTGl/7Vi49bg9ukdp67Uw1MbyOoxHNLdowmhXalZCtj2vJ352+7Cc3206/1Ssi0I3Ok09EV/wGLDDgxvagg3EvFko10oXHchyxurFS1W5cTQ5eM+/YPi22A/1IZwfIKLOV4A9gowFMaf9gZmd4Kfxh1/+36SmbdR2lB2tCJ3681wI/tli0YvFmLFTN8f+8rpWonu/e5DPfTkgKUXjqY2bZg80h9LvmXb9wrDZZip6WDQK3WDuTvCjl2KVhD71eic/ze+bzbIfdwuhY4T1N0u0XNgmfXSAJIaMSJsPiLE5o3A2GPY1Pi9ljvkbHL0NPOWBNlaBuuhQIROogBT2hRdo1S72XU60/FRf8RXLrkuMMuVe+cXwOqi3CSJRh0uUMtIPVyzjQmY=
  skip_cleanup: true
  file:
  - target/sonar-r-plugin-$project_version.jar
  on:
    tags: true
